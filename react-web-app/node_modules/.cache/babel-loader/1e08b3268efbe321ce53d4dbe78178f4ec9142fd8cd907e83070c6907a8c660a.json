{"ast":null,"code":"import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import{authService}from'../../services/authService';// Async thunks\nexport const login=createAsyncThunk('auth/login',async(credentials,_ref)=>{let{rejectWithValue}=_ref;try{const response=await authService.login(credentials);return response;}catch(error){var _error$response;return rejectWithValue(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||{message:'Login failed'});}});export const register=createAsyncThunk('auth/register',async(userData,_ref2)=>{let{rejectWithValue}=_ref2;try{const response=await authService.register(userData);return response;}catch(error){var _error$response2;return rejectWithValue(((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.data)||{message:'Registration failed'});}});export const verifyToken=createAsyncThunk('auth/verifyToken',async(_,_ref3)=>{let{rejectWithValue,getState}=_ref3;try{const{token}=getState().auth;if(!token){throw new Error('No token available');}const response=await authService.verifyToken(token);return response;}catch(error){var _error$response3;return rejectWithValue(((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.data)||{message:'Token verification failed'});}});const initialState={user:null,token:localStorage.getItem('token'),isAuthenticated:false,loading:false,error:null};const authSlice=createSlice({name:'auth',initialState,reducers:{logout:state=>{state.user=null;state.token=null;state.isAuthenticated=false;state.error=null;localStorage.removeItem('token');},clearError:state=>{state.error=null;},setToken:(state,action)=>{state.token=action.payload;state.isAuthenticated=true;localStorage.setItem('token',action.payload);}},extraReducers:builder=>{builder// Login\n.addCase(login.pending,state=>{state.loading=true;state.error=null;}).addCase(login.fulfilled,(state,action)=>{state.loading=false;state.user=action.payload.user;state.token=action.payload.token;state.isAuthenticated=true;localStorage.setItem('token',action.payload.token);}).addCase(login.rejected,(state,action)=>{var _action$payload;state.loading=false;state.error=((_action$payload=action.payload)===null||_action$payload===void 0?void 0:_action$payload.message)||'Login failed';})// Register\n.addCase(register.pending,state=>{state.loading=true;state.error=null;}).addCase(register.fulfilled,(state,action)=>{state.loading=false;state.user=action.payload.user;state.token=action.payload.token;state.isAuthenticated=true;localStorage.setItem('token',action.payload.token);}).addCase(register.rejected,(state,action)=>{var _action$payload2;state.loading=false;state.error=((_action$payload2=action.payload)===null||_action$payload2===void 0?void 0:_action$payload2.message)||'Registration failed';})// Verify Token\n.addCase(verifyToken.pending,state=>{state.loading=true;}).addCase(verifyToken.fulfilled,(state,action)=>{state.loading=false;state.user=action.payload.user;state.isAuthenticated=true;}).addCase(verifyToken.rejected,(state,action)=>{state.loading=false;state.user=null;state.token=null;state.isAuthenticated=false;localStorage.removeItem('token');});}});export const{logout,clearError,setToken}=authSlice.actions;export default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","authService","login","credentials","_ref","rejectWithValue","response","error","_error$response","data","message","register","userData","_ref2","_error$response2","verifyToken","_","_ref3","getState","token","auth","Error","_error$response3","initialState","user","localStorage","getItem","isAuthenticated","loading","authSlice","name","reducers","logout","state","removeItem","clearError","setToken","action","payload","setItem","extraReducers","builder","addCase","pending","fulfilled","rejected","_action$payload","_action$payload2","actions","reducer"],"sources":["/Users/yousuf/Downloads/tic-tac-toe-engine/react-web-app/src/store/slices/authSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { authService } from '../../services/authService';\n\n// Async thunks\nexport const login = createAsyncThunk(\n  'auth/login',\n  async (credentials, { rejectWithValue }) => {\n    try {\n      const response = await authService.login(credentials);\n      return response;\n    } catch (error) {\n      return rejectWithValue(error.response?.data || { message: 'Login failed' });\n    }\n  }\n);\n\nexport const register = createAsyncThunk(\n  'auth/register',\n  async (userData, { rejectWithValue }) => {\n    try {\n      const response = await authService.register(userData);\n      return response;\n    } catch (error) {\n      return rejectWithValue(error.response?.data || { message: 'Registration failed' });\n    }\n  }\n);\n\nexport const verifyToken = createAsyncThunk(\n  'auth/verifyToken',\n  async (_, { rejectWithValue, getState }) => {\n    try {\n      const { token } = getState().auth;\n      if (!token) {\n        throw new Error('No token available');\n      }\n      const response = await authService.verifyToken(token);\n      return response;\n    } catch (error) {\n      return rejectWithValue(error.response?.data || { message: 'Token verification failed' });\n    }\n  }\n);\n\nconst initialState = {\n  user: null,\n  token: localStorage.getItem('token'),\n  isAuthenticated: false,\n  loading: false,\n  error: null,\n};\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    logout: (state) => {\n      state.user = null;\n      state.token = null;\n      state.isAuthenticated = false;\n      state.error = null;\n      localStorage.removeItem('token');\n    },\n    clearError: (state) => {\n      state.error = null;\n    },\n    setToken: (state, action) => {\n      state.token = action.payload;\n      state.isAuthenticated = true;\n      localStorage.setItem('token', action.payload);\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      // Login\n      .addCase(login.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(login.fulfilled, (state, action) => {\n        state.loading = false;\n        state.user = action.payload.user;\n        state.token = action.payload.token;\n        state.isAuthenticated = true;\n        localStorage.setItem('token', action.payload.token);\n      })\n      .addCase(login.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.payload?.message || 'Login failed';\n      })\n      // Register\n      .addCase(register.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(register.fulfilled, (state, action) => {\n        state.loading = false;\n        state.user = action.payload.user;\n        state.token = action.payload.token;\n        state.isAuthenticated = true;\n        localStorage.setItem('token', action.payload.token);\n      })\n      .addCase(register.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.payload?.message || 'Registration failed';\n      })\n      // Verify Token\n      .addCase(verifyToken.pending, (state) => {\n        state.loading = true;\n      })\n      .addCase(verifyToken.fulfilled, (state, action) => {\n        state.loading = false;\n        state.user = action.payload.user;\n        state.isAuthenticated = true;\n      })\n      .addCase(verifyToken.rejected, (state, action) => {\n        state.loading = false;\n        state.user = null;\n        state.token = null;\n        state.isAuthenticated = false;\n        localStorage.removeItem('token');\n      });\n  },\n});\n\nexport const { logout, clearError, setToken } = authSlice.actions;\nexport default authSlice.reducer; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}